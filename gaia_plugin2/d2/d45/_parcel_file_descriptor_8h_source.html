<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>/home/gpdbuildserver3/Jenkins_Workspace/workspace/BuildGaia2SDKLauncher/sdk/include/gaia/storage/ParcelFileDescriptor.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = '../../open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = '../../closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../dir_f5a4bec0d15a4b7c4d0fd858ebd5efd3.html">include</a>      </li>
      <li class="navelem"><a class="el" href="../../dir_1456e22c17612b474594c42fce5c0653.html">gaia</a>      </li>
      <li class="navelem"><a class="el" href="../../dir_c9e39960ebe360ab739e60b68b6b53c1.html">storage</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">ParcelFileDescriptor.h</div>  </div>
</div>
<div class="contents">
<a href="../../d2/d45/_parcel_file_descriptor_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright for gaia</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#ifndef INCLUDE_GAIA_STORAGE_PARCELFILEDESCRIPTOR_H_</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#define INCLUDE_GAIA_STORAGE_PARCELFILEDESCRIPTOR_H_</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;<a class="code" href="../../d4/d71/_file_input_stream_8h.html">gaia/storage/FileInputStream.h</a>&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="keyword">namespace </span>gaia {
<a name="l00010"></a>00010 <span class="keyword">class </span>ParcelFileDescriptorProxy;
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="keyword">namespace </span>base {
<a name="l00013"></a>00013 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">class </span>Vector;
<a name="l00014"></a>00014 }
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">namespace </span>core {
<a name="l00017"></a>00017 <span class="keyword">class </span>Parcel;
<a name="l00018"></a>00018 }
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="keyword">namespace </span>storage {
<a name="l00021"></a>00021 <span class="keyword">class </span>File;
<a name="l00022"></a>00022 <span class="keyword">class </span>FileDescriptor;
<a name="l00023"></a>00023 
<a name="l00057"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html">00057</a> <span class="keyword">class </span><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a> {
<a name="l00058"></a>00058   <span class="keyword">public</span>:
<a name="l00066"></a>00066     <span class="keyword">explicit</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#aeadf05f811cfabecf5c4ce37477c48bf" title="Constructs a new ParcelFileDescriptor using the specified ParcelFileDescriptor.">ParcelFileDescriptor</a>(<a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>* pdescriptor);
<a name="l00067"></a>00067 
<a name="l00073"></a>00073     <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#aeadf05f811cfabecf5c4ce37477c48bf" title="Constructs a new ParcelFileDescriptor using the specified ParcelFileDescriptor.">ParcelFileDescriptor</a>(<span class="keyword">const</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>&amp; o);
<a name="l00074"></a>00074 
<a name="l00078"></a>00078     <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a9c608388f421289c6b5688b99339b91b" title="deconstructor">~ParcelFileDescriptor</a>();
<a name="l00079"></a>00079 
<a name="l00083"></a>00083      <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>&amp; <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#af27071d7eded832113c09e60d1e98884" title="Assignment operator.">operator=</a>(<span class="keyword">const</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>&amp; o);
<a name="l00084"></a>00084 
<a name="l00088"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0">00088</a>     <span class="keyword">enum</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0" title="The file modes.">FDmode</a> {
<a name="l00094"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a92fd215b4778b715ec02ddd472d68b67">00094</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a92fd215b4778b715ec02ddd472d68b67" title="For use with openN: if MODE_CREATE has been supplied and this file doesn&#39;t already exist...">MODE_WORLD_READABLE</a> = 0x00000001,
<a name="l00095"></a>00095 
<a name="l00101"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a06ea15104b34afa71de007d47f863798">00101</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a06ea15104b34afa71de007d47f863798" title="For use with openN: if MODE_CREATE has been supplied and this file doesn&#39;t already exist...">MODE_WORLD_WRITEABLE</a> = 0x00000002,
<a name="l00102"></a>00102 
<a name="l00106"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a2fd0d5f2616ec2fb509fae7bf57db0a1">00106</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a2fd0d5f2616ec2fb509fae7bf57db0a1" title="For use with openN: open the file with read-only access.">MODE_READ_ONLY</a> = 0x10000000,
<a name="l00107"></a>00107 
<a name="l00111"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a53b3c74036ce2ea30924ab96c1b1709b">00111</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a53b3c74036ce2ea30924ab96c1b1709b" title="For use with openN: open the file with write-only access.">MODE_WRITE_ONLY</a> = 0x20000000,
<a name="l00112"></a>00112 
<a name="l00117"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a4b585cb29b18c9cfdfc148cd02da065a">00117</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a4b585cb29b18c9cfdfc148cd02da065a" title="For use with openN: open the file with read and write access.">MODE_READ_WRITE</a> = 0x30000000,
<a name="l00118"></a>00118 
<a name="l00123"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a43551efb55440f3ed964e747c646e2ee">00123</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a43551efb55440f3ed964e747c646e2ee" title="For use with openN: create the file if it doesn&#39;t already exist.">MODE_CREATE</a> = 0x08000000,
<a name="l00124"></a>00124 
<a name="l00128"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a25d68bdde7bc0e1618eab1f48ccb95f2">00128</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a25d68bdde7bc0e1618eab1f48ccb95f2" title="For use with openN: erase contents of file when opening.">MODE_TRUNCATE</a> = 0x04000000,
<a name="l00129"></a>00129 
<a name="l00133"></a><a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a6840ffff9b22c99da037650e3b8fad7a">00133</a>         <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0a6840ffff9b22c99da037650e3b8fad7a" title="For use with openN: append to end of file while writing.">MODE_APPEND</a> = 0x02000000
<a name="l00134"></a>00134     };
<a name="l00135"></a>00135 
<a name="l00148"></a>00148     <span class="keyword">static</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>* <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#ad95bbbb060490644d66cd694ef8718b5" title="Create a new ParcelFileDescriptor accessing a given file.">openN</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d31/classgaia_1_1storage_1_1_file.html" title="An &quot;abstract&quot; representation of a file system entity identified by a pathname.">File</a>&amp; file, <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a5f795666457b0b56743002bf1117c6c0" title="The file modes.">FDmode</a> mode);
<a name="l00149"></a>00149 
<a name="l00155"></a>00155     <a class="code" href="../../d0/d93/classgaia_1_1storage_1_1_file_descriptor.html" title="The lowest-level representation of a file, device, or socket.">FileDescriptor</a>* <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#ad3ee4118a390406b012589930d13c866" title="Retrieve the actual FileDescriptor associated with this object.">getFileDescriptorN</a>();
<a name="l00156"></a>00156 
<a name="l00161"></a>00161     <span class="keywordtype">void</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a7ca8f4833c84237e2177958da6bbccad" title="Close the ParcelFileDescriptor.">close</a>();
<a name="l00162"></a>00162 
<a name="l00172"></a>00172     <span class="keyword">static</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>* <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a6b03a5b98f4615e4ca5178d0a45a2947" title="Take ownership of a raw native fd in to a new ParcelFileDescriptor.">adoptFdN</a>(int32_t fd);
<a name="l00173"></a>00173 
<a name="l00179"></a>00179     int32_t <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a842a11509a7e2b27ebfc04869bbe86bb" title="Return the native fd int for this ParcelFileDescriptor and detach it from the object here...">detachFd</a>();
<a name="l00180"></a>00180 
<a name="l00190"></a>00190     <span class="keyword">static</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>* <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a50908bbba2b7d81cd751b8f3a6f200e3" title="Create a new ParcelFileDescriptor from a raw native fd.">fromFdN</a>(int32_t fd);
<a name="l00191"></a>00191 
<a name="l00197"></a>00197     int32_t <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a0edb2928197616ca8d81706805a34061" title="Return the native fd int for this ParcelFileDescriptor.">getFd</a>();
<a name="l00198"></a>00198 
<a name="l00204"></a>00204     <span class="keywordtype">void</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a90021c8beae0472ef656727b67d0946b" title="Flatten this object in to a Parcel.">writeToParcel</a>(<a class="code" href="../../d6/d3e/classgaia_1_1core_1_1_parcel.html" title="Container for a message (data and object references)">gaia::core::Parcel</a>* out, int32_t flags);
<a name="l00205"></a>00205 
<a name="l00210"></a>00210     <span class="keyword">static</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>* <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a06dbc0104cf30d3328cff7140382367c" title="Create a new instance of this class, instantiating it from the given Parcel whose data had previously...">createFromParcelN</a>(
<a name="l00211"></a>00211             <span class="keyword">const</span> <a class="code" href="../../d6/d3e/classgaia_1_1core_1_1_parcel.html" title="Container for a message (data and object references)">gaia::core::Parcel</a>&amp; source);
<a name="l00212"></a>00212 
<a name="l00218"></a>00218     <span class="keyword">static</span> <a class="code" href="../../df/d5d/classgaia_1_1base_1_1_vector.html" title="This class implements the vector data structure.">base::Vector&lt;ParcelFileDescriptor*&gt;</a> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#a7a328f1261ad7db89d44089041313536" title="Create two ParcelFileDescriptors structured as a data pipe.">createPipeN</a>();
<a name="l00219"></a>00219 
<a name="l00225"></a><a class="code" href="../../d6/d28/classgaia_1_1storage_1_1_parcel_file_descriptor_1_1_auto_close_input_stream.html">00225</a>     <span class="keyword">class </span><a class="code" href="../../d6/d28/classgaia_1_1storage_1_1_parcel_file_descriptor_1_1_auto_close_input_stream.html" title="An InputStream you can create on a ParcelFileDescriptor, which will take care of calling ParcelFileDe...">AutoCloseInputStream</a> : <span class="keyword">public</span> <a class="code" href="../../da/da8/classgaia_1_1storage_1_1_file_input_stream.html" title="A Stream way to read primitive data.">FileInputStream</a> {
<a name="l00226"></a>00226       <span class="keyword">public</span>:
<a name="l00227"></a>00227         <span class="keyword">explicit</span> <a class="code" href="../../d6/d28/classgaia_1_1storage_1_1_parcel_file_descriptor_1_1_auto_close_input_stream.html#ab72e82b5b1473e55225f2e793c438d7e">AutoCloseInputStream</a>(<span class="keyword">const</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html" title="The FileDescriptor returned by gaia::core::Parcel#readFileDescriptor, allowing you to close it when d...">ParcelFileDescriptor</a>&amp; fd);
<a name="l00228"></a>00228         <a class="code" href="../../d6/d28/classgaia_1_1storage_1_1_parcel_file_descriptor_1_1_auto_close_input_stream.html#a06fe56aa7bbb2171e62babd09cdc771a">~AutoCloseInputStream</a>();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         <span class="keywordtype">void</span> <a class="code" href="../../d6/d28/classgaia_1_1storage_1_1_parcel_file_descriptor_1_1_auto_close_input_stream.html#ab1adfcf37e84c0c82a6998caeadbc25b" title="Closes this stream.">close</a>();
<a name="l00231"></a>00231 
<a name="l00233"></a>00233         <span class="keyword">explicit</span> <a class="code" href="../../d6/d28/classgaia_1_1storage_1_1_parcel_file_descriptor_1_1_auto_close_input_stream.html#ab72e82b5b1473e55225f2e793c438d7e">AutoCloseInputStream</a>(gaia::InputStreamProxy* proxy);
<a name="l00235"></a>00235     };
<a name="l00236"></a>00236 
<a name="l00238"></a>00238     gaia::ParcelFileDescriptorProxy* getProxy() <span class="keyword">const</span>;
<a name="l00239"></a>00239     gaia::ParcelFileDescriptorProxy* getProxyAndDestroy();
<a name="l00240"></a>00240     <span class="keyword">explicit</span> <a class="code" href="../../d9/d9f/classgaia_1_1storage_1_1_parcel_file_descriptor.html#aeadf05f811cfabecf5c4ce37477c48bf" title="Constructs a new ParcelFileDescriptor using the specified ParcelFileDescriptor.">ParcelFileDescriptor</a>(ParcelFileDescriptorProxy* proxy);
<a name="l00243"></a>00243   <span class="keyword">private</span>:
<a name="l00245"></a>00245     gaia::ParcelFileDescriptorProxy* mpParcelDescriptorProxy;
<a name="l00247"></a>00247 };  <span class="comment">// ParcelFileDescriptor</span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 }  <span class="comment">// namespace storage</span>
<a name="l00250"></a>00250 }  <span class="comment">// namespace gaia</span>
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 <span class="preprocessor">#endif  // INCLUDE_GAIA_STORAGE_PARCELFILEDESCRIPTOR_H_</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Jul 12 2013 04:17:36 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
